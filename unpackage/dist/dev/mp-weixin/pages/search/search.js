"use strict";const e=require("../../common/vendor.js"),y=require("../../utils/urlUtil.js"),o=require("../../utils/cache.js"),u=require("../../common/assets.js");require("../../utils/request.js");const g={data(){return{inputValue:"",buildingData:[],historyKey:[],keywords:null,selectedHistory:""}},onLoad(){this.historyKey=o.cache.getHistoryKeywords()},methods:{getImageUrl(i){return y.urlUtil.getImgUrlNotSize(i)},onItemClick(i){e.index.navigateTo({url:"/pages/pfs/detail?id="+i.id})},cleanHistoryKeywords(){o.cache.cleanHistoryKeywords(),this.historyKey=o.cache.getHistoryKeywords()},onClickSearch(i){o.cache.saveHistoryKeywords(this.keywords),this.historyKey=o.cache.getHistoryKeywords(),this.onSearch(i)},onClickHistory(i){this.selectedHistory=i,o.cache.saveHistoryKeywords(i),this.historyKey=o.cache.getHistoryKeywords(),this.onSearch({detail:{value:i}})},onSearch(i){this.keywords=i.detail.value,this.fetchBuildingList(1,20)},fetchBuildingList(i,c){this.$api.fetchBuildingList(i,c,this.keywords,"",!1).then(l=>{this.$refs.paging.complete(l)}).catch(l=>{this.$refs.paging.complete(!1)})}}};if(!Array){const i=e.resolveComponent("uni-icons"),c=e.resolveComponent("z-paging");(i+c)()}const d=()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js",_=()=>"../../uni_modules/z-paging/components/z-paging/z-paging.js";Math||(d+_)();function p(i,c,l,K,r,t){return e.e({a:u._imports_0$2,b:e.o((...s)=>t.onClickSearch&&t.onClickSearch(...s)),c:e.o([s=>r.selectedHistory=s.detail.value,(...s)=>t.onSearch&&t.onSearch(...s)]),d:r.selectedHistory,e:r.historyKey&&r.historyKey.length>0},r.historyKey&&r.historyKey.length>0?{f:e.o(s=>t.cleanHistoryKeywords()),g:e.p({type:"trash-filled",size:"34rpx",color:"#626162"})}:{},{h:r.historyKey&&r.historyKey.length>0},r.historyKey&&r.historyKey.length>0?{i:e.f(r.historyKey,(s,a,h)=>({a:e.t(s),b:e.o(n=>t.onClickHistory(s))}))}:{},{j:e.f(r.buildingData,(s,a,h)=>({a:t.getImageUrl(s.pic),b:e.t(s.name),c:e.t(s.price),d:e.t(s.address),e:e.f(s.tags,(n,m,H)=>e.e({a:n&&i.tab!=""},n&&i.tab!=""?{b:e.t(n)}:{})),f:e.o(n=>t.onItemClick(s))})),k:e.sr("paging","c10c040c-0"),l:e.o(t.fetchBuildingList),m:e.o(s=>r.buildingData=s),n:e.p({["default-page-size"]:"20",auto:!1,modelValue:r.buildingData})})}const f=e._export_sfc(g,[["render",p],["__scopeId","data-v-c10c040c"],["__file","D:/HBuilderProjects/house/pages/search/search.vue"]]);wx.createPage(f);
