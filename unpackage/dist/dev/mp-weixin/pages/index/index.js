"use strict";const r=require("../../common/vendor.js"),g=require("../../utils/urlUtil.js"),_=require("../../utils/cache.js"),u=require("../../common/assets.js");require("../../utils/request.js");const h=()=>"../../components/Head/Head.js",p=()=>"../../components/Search/Search.js",f={components:{Head:h,Search:p},data(){return{imageBannerData:[],videoBannerData:[],recommendBuildingData:[],wx:{}}},onShareAppMessage(n){return this.$shareIndex()},onShow(){this.wx=r.wx$1.getMenuButtonBoundingClientRect()},onLoad(){this.fetchBanner()},methods:{getImageUrl(n){return g.urlUtil.getImgUrlNotSize(n)},isVideoBanner(n){return g.urlUtil.isVideo(n)},onBannerClick(n){n&&(n.handle_type=="1"?n.web_url&&n.web_url!=""&&r.index.navigateTo({url:"/pages/web/web?url="+g.urlUtil.getFullUrl(n.web_url)}):n.handle_type=="2"?n.web_url&&n.web_url!=""&&r.wx$1.openChannelsUserProfile({finderUserName:n.web_url,success:function(){},fail:function(){console.log("openChannelsUserProfile fail: "+JSON.stringify(e))}}):n.handle_type=="3"&&n.web_url&&n.web_url!=""&&n.relation_id&&n.relation_id!=""&&r.wx$1.openChannelsActivity({finderUserName:n.web_url,feedId:n.relation_id,success:function(){},fail:function(){console.log("openChannelsActivity fail: "+JSON.stringify(e))}}))},onItemClick(n){r.index.navigateTo({url:"/pages/pfs/detail?id="+n.id})},onClickScan(){this.checkLogin()&&r.index.navigateTo({url:"/pages/register/scan"})},getDisplayAddress(n){let s="";return n&&(n.province&&(s=n.province),n.city&&(s=s+n.city),n.district&&(s=s+n.district),n.address&&(s=s+n.address)),s},fetchBanner(){this.$api.getBanner().then(n=>{this.imageBannerData=n.imgBanner,this.videoBannerData=n.videoBanner}).catch(n=>{console.log("getBanner err: "+JSON.stringify(n))})},onRefresh(n,s){n==1&&this.fetchBanner(),this.fetchRecommendBuilding(n,s)},fetchRecommendBuilding(n,s){this.$api.fetchBuildingList(n,s,"","",!0).then(c=>{this.$refs.paging.complete(c)}).catch(c=>{this.$refs.paging.complete(!1)})},checkLogin(){let n=_.cache.getToken();return!n||n==""?(r.index.navigateTo({url:"/pages/login/login"}),!1):!0}}};if(!Array){const n=r.resolveComponent("Head"),s=r.resolveComponent("Search"),c=r.resolveComponent("z-paging");(n+s+c)()}const B=()=>"../../components/Head/Head.js",m=()=>"../../components/Search/Search.js",v=()=>"../../uni_modules/z-paging/components/z-paging/z-paging.js";Math||(B+m+v)();function S(n,s,c,w,l,i){return{a:r.p({title:"首页"}),b:r.f(l.imageBannerData,(a,t,d)=>({a:i.getImageUrl(a.img_url),b:t,c:r.o(o=>i.onBannerClick(a),t)})),c:u._imports_0,d:u._imports_1,e:r.o(a=>i.onClickScan()),f:u._imports_2,g:r.f(l.videoBannerData,(a,t,d)=>r.e({a:i.isVideoBanner(a.img_url)},i.isVideoBanner(a.img_url)?{b:i.getImageUrl(a.img_url),c:r.o(o=>n.BoFang(),t),d:r.o(o=>n.ZanTing(),t)}:{e:i.getImageUrl(a.img_url)},{f:t,g:r.o(o=>i.onBannerClick(a),t)})),h:r.f(l.recommendBuildingData,(a,t,d)=>r.e({a:i.getImageUrl(a.pic),b:a.status==="preSale"},a.status==="preSale"?{}:a.status==="onSale"?{}:{},{c:a.status==="onSale",d:r.f(a.tags,(o,C,U)=>r.e({a:o&&o!=""},o&&o!=""?{b:r.t(o)}:{})),e:r.t(a.name),f:r.t(a.price),g:r.t(i.getDisplayAddress(a)),h:r.o(o=>i.onItemClick(a))})),i:r.sr("paging","1cf27b2a-1"),j:r.o(i.onRefresh),k:r.o(a=>l.recommendBuildingData=a),l:r.p({modelValue:l.recommendBuildingData})}}const y=r._export_sfc(f,[["render",S],["__scopeId","data-v-1cf27b2a"],["__file","D:/HBuilderProjects/house/pages/index/index.vue"]]);f.__runtimeHooks=2;wx.createPage(y);
