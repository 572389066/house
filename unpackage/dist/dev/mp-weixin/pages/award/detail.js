"use strict";const o=require("../../common/vendor.js"),c=require("../../utils/cache.js"),h=require("../../utils/download.js"),m=require("../../utils/urlUtil.js"),d=require("../../utils/clipboard.js");require("../../utils/request.js");const l={data(){return{promotionId:"",promotionDetail:null,videoData:[]}},onLoad(t){this.promotionId=t.id,this.fetchPromotionDetail()},onShareAppMessage(t){return this.promotionDetail?this.$shareAward(this.promotionId,this.promotionDetail.title):this.$shareIndex()},methods:{goupload(){this.checkLogin()&&o.index.navigateTo({url:"/pages/award/prove?id="+this.promotionId})},fetchPromotionDetail(){this.$api.fetchPromotionDetail(this.promotionId).then(t=>{this.promotionDetail=t,this.getVideo()}).catch(t=>{})},getVideo(){if(this.promotionDetail&&this.promotionDetail.detail&&this.promotionDetail.detail!=""){let t=[];this.promotionDetail.detail.replace(/<video [^>]*src=['"]([^'"]+)[^>]*>/,function(r,e){t.push(e)}),this.videoData=t}},onClickDownload(){let n=this.$refs.article.imgList,r=[];if(n&&n.length>0)for(var e=0;e<n.length;e++){let s=n[e];s&&s!=""&&r.push(s)}if(this.videoData&&this.videoData.length>0)for(var e=0;e<this.videoData.length;e++){let i=this.videoData[e];i&&i!=""&&r.push(i)}if(r.length==0){this.$msg("未找到图片/视频资源");return}for(var e=0;e<r.length;e++){let i=r[e];h.download.saveImage(i,m.urlUtil.isVideo(i))}},onClickCopy(){let n=this.$refs.article.getText();d.copyContent(n),this.$msg("复制成功")},checkLogin(){let t=c.cache.getToken();return!t||t==""?(o.index.navigateTo({url:"/pages/login/login"}),!1):!0}}};if(!Array){const t=o.resolveComponent("uni-icons"),n=o.resolveComponent("mp-html");(t+n)()}const u=()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js",p=()=>"../../uni_modules/mp-html/components/mp-html/mp-html.js";Math||(u+p)();function _(t,n,r,e,s,i){return{a:o.p({type:"info",size:"30rpx",color:"#E09A5B"}),b:o.t(s.promotionDetail.title),c:o.sr("article","c2cf99df-1"),d:o.p({content:s.promotionDetail.detail}),e:o.o(a=>i.onClickDownload()),f:o.o(a=>i.onClickCopy()),g:o.o((...a)=>i.goupload&&i.goupload(...a))}}const f=o._export_sfc(l,[["render",_],["__scopeId","data-v-c2cf99df"],["__file","D:/HBuilderProjects/house/pages/award/detail.vue"]]);l.__runtimeHooks=2;wx.createPage(f);
