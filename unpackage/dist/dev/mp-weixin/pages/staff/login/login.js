"use strict";const t=require("../../../common/vendor.js"),a=require("../../../utils/cache.js"),u={data(){return{}},onLoad(n){let e=a.cache.getStaffToken();e&&e!=""&&t.index.redirectTo({url:"/pages/staff/index/index"})},methods:{onClickSubmit(n){var e=n.detail.value.phone,o=n.detail.value.password;if(!e||e.length===0){t.index.showToast({icon:"none",title:"请输入用户名"});return}if(!o||o.length===0){t.index.showToast({icon:"none",title:"请输入登录密码"});return}t.index.login({provider:"weixin",onlyAuthorize:!0,success:i=>{const{code:s}=i;this.submitLogin(e,o,s)},fail:i=>{this.$msg("登录失败")}})},submitLogin(n,e,o){this.$staffApi.submitLogin(n,e,o).then(i=>{i?(a.cache.saveStaffToken(i),t.index.redirectTo({url:"/pages/staff/index/index"})):this.$msg("获取登录信息失败")}).catch(i=>{})}}};function d(n,e,o,i,s,r){return{a:t.o((...c)=>r.onClickSubmit&&r.onClickSubmit(...c))}}const l=t._export_sfc(u,[["render",d],["__file","D:/HBuilderProjects/house/pages/staff/login/login.vue"]]);wx.createPage(l);
