"use strict";const r=require("../common/vendor.js");function y(e){r.index.setStorage({key:"token",data:e})}function f(){try{return r.index.getStorageSync("token")}catch{return""}}function u(e){r.index.setStorage({key:"staffToken",data:e,success:()=>{},fail:t=>{}})}function d(){try{return r.index.getStorageSync("staffToken")}catch{return""}}function g(e){if(!e||e=="")return;let t=a(),n=[];if(n.push(e),t&&t.length>0){let o=t.indexOf(e);o>=0&&t.splice(o,1);for(var i=0;i<t.length&&i<10;i++){let s=t[i];s&&s!=""&&n.push(s)}}r.index.setStorage({key:"historyKeywords",data:JSON.stringify(n)})}function a(){let e=[];try{let t=r.index.getStorageSync("historyKeywords");t&&t!=""&&(e=JSON.parse(t))}catch{return e}return e}function l(){r.index.setStorage({key:"historyKeywords",data:"[]"})}function h(e){e&&e.id&&e.id!=""&&e.name&&e.name!=""?r.index.setStorage({key:"current_building",data:JSON.stringify(e)}):r.index.setStorage({key:"current_building",data:""})}function S(e){let t=null;try{let n=r.index.getStorageSync("current_building");n&&n!=""&&(t=JSON.parse(n))}catch{return t}return t}function k(e){if(e&&e.id&&e.id!=""&&e.name&&e.name!=""){let n=c(),i=[];if(n&&n.length>0)for(var t=0;t<n.length&&i.length<3;t++){let o=n[t];e.id&&o&&o.id!=e.id&&i.push(o)}i.unshift(e),r.index.setStorage({key:"history_building",data:JSON.stringify(i)})}}function c(){let e=[];try{let t=r.index.getStorageSync("history_building");console.log("getHistoryBuilding: "+t),t&&t!=""&&(e=JSON.parse(t))}catch{return e}return e}const x={saveToken:y,getToken:f,saveStaffToken:u,getStaffToken:d,saveHistoryKeywords:g,getHistoryKeywords:a,cleanHistoryKeywords:l,saveCurrentBuilding:h,getCurrentBuilding:S,getHistoryBuilding:c,saveHistoryBuilding:k};exports.cache=x;
