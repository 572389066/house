"use strict";const e=require("../../../common/vendor.js"),i=require("../../../utils/cache.js"),t={data:()=>({}),onLoad(t){let n=i.cache.getStaffToken();n&&""!=n&&e.index.redirectTo({url:"/pages/staff/index/index"})},methods:{onClickSubmit(i){var t=i.detail.value.phone,n=i.detail.value.password;t&&0!==t.length?n&&0!==n.length?e.index.login({provider:"weixin",onlyAuthorize:!0,success:e=>{const{code:i}=e;this.submitLogin(t,n,i)},fail:e=>{this.$msg("登录失败")}}):e.index.showToast({icon:"none",title:"请输入登录密码"}):e.index.showToast({icon:"none",title:"请输入用户名"})},submitLogin(t,n,o){this.$staffApi.submitLogin(t,n,o).then((t=>{t?(i.cache.saveStaffToken(t),e.index.redirectTo({url:"/pages/staff/index/index"})):this.$msg("获取登录信息失败")})).catch((e=>{}))}}};const n=e._export_sfc(t,[["render",function(i,t,n,o,s,a){return{a:e.o(((...e)=>a.onClickSubmit&&a.onClickSubmit(...e)))}}]]);wx.createPage(n);
