"use strict";const t=require("../../../common/vendor.js"),e={data:()=>({recordData:null,staffData:[],staff:null}),onLoad(t){t&&t.record&&(this.recordData=JSON.parse(decodeURIComponent(t.record)))},methods:{showStaffPicker(){this.$refs.staffPicker.open()},closeStaffPicker(){this.$refs.staffPicker.close()},bindStaff(t){this.staff=t,this.closeStaffPicker()},onClickSubmit(){this.recordData&&this.recordData.id?this.staff&&this.staff.id?t.index.showModal({title:"提示",content:"是否将当前客户转让给"+this.staff.username+"?",success:t=>{t.confirm?this.submitTransfer():t.cancel}}):this.$msg("选择员工"):this.$msg("获取客服信息出错")},submitTransfer(){this.$staffApi.submitTransfer(this.recordData.id,this.staff.id).then((e=>{this.$msg("转让成功"),setTimeout((()=>{t.index.navigateBack()}),1e3)})).catch((t=>{}))},fetchStaff(t,e){this.$staffApi.fetchStaff().then((t=>{this.$refs.staffPaging.complete(t)})).catch((t=>{this.$refs.staffPaging.complete(!1)}))}}};if(!Array){(t.resolveComponent("uni-icons")+t.resolveComponent("z-paging")+t.resolveComponent("uni-popup"))()}Math||((()=>"../../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../../uni_modules/z-paging/components/z-paging/z-paging.js")+(()=>"../../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const s=t._export_sfc(e,[["render",function(e,s,a,i,o,f){return{a:t.t(o.recordData?o.recordData.user_phone:"--"),b:t.t(o.staff?o.staff.username:""),c:t.p({type:"right",color:"#333134",size:"28rpx"}),d:t.o((t=>f.showStaffPicker())),e:t.o((t=>f.onClickSubmit())),f:t.p({type:"closeempty",size:"20",color:"#999999"}),g:t.o(((...t)=>f.closeStaffPicker&&f.closeStaffPicker(...t))),h:t.f(o.staffData,((e,s,a)=>({a:t.t(e.username),b:t.o((t=>f.bindStaff(e)))}))),i:t.sr("staffPaging","d054866e-2,d054866e-1"),j:t.o(f.fetchStaff),k:t.o((t=>o.staffData=t)),l:t.p({fixed:!1,"loading-more-enabled":!1,modelValue:o.staffData}),m:t.sr("staffPicker","d054866e-1"),n:t.p({type:"bottom"})}}]]);wx.createPage(s);
