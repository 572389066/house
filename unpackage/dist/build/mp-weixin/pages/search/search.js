"use strict";const e=require("../../common/vendor.js"),t=require("../../utils/urlUtil.js"),i=require("../../utils/cache.js"),s=require("../../common/assets.js");require("../../utils/request.js");const o={data:()=>({inputValue:"",buildingData:[],historyKey:[],keywords:null,selectedHistory:""}),onLoad(){this.historyKey=i.cache.getHistoryKeywords()},methods:{getImageUrl:e=>t.urlUtil.getImgUrlNotSize(e),onItemClick(t){e.index.navigateTo({url:"/pages/pfs/detail?id="+t.id})},cleanHistoryKeywords(){i.cache.cleanHistoryKeywords(),this.historyKey=i.cache.getHistoryKeywords()},onClickSearch(e){i.cache.saveHistoryKeywords(this.keywords),this.historyKey=i.cache.getHistoryKeywords(),this.onSearch(e)},onClickHistory(e){this.selectedHistory=e,i.cache.saveHistoryKeywords(e),this.historyKey=i.cache.getHistoryKeywords(),this.onSearch({detail:{value:e}})},onSearch(e){this.keywords=e.detail.value,this.fetchBuildingList(1,20)},fetchBuildingList(e,t){this.$api.fetchBuildingList(e,t,this.keywords,"",!1).then((e=>{this.$refs.paging.complete(e)})).catch((e=>{this.$refs.paging.complete(!1)}))}}};if(!Array){(e.resolveComponent("uni-icons")+e.resolveComponent("z-paging"))()}Math||((()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../uni_modules/z-paging/components/z-paging/z-paging.js"))();const r=e._export_sfc(o,[["render",function(t,i,o,r,a,n){return e.e({a:s._imports_0$2,b:e.o(((...e)=>n.onClickSearch&&n.onClickSearch(...e))),c:e.o([e=>a.selectedHistory=e.detail.value,(...e)=>n.onSearch&&n.onSearch(...e)]),d:a.selectedHistory,e:a.historyKey&&a.historyKey.length>0},a.historyKey&&a.historyKey.length>0?{f:e.o((e=>n.cleanHistoryKeywords())),g:e.p({type:"trash-filled",size:"34rpx",color:"#626162"})}:{},{h:a.historyKey&&a.historyKey.length>0},a.historyKey&&a.historyKey.length>0?{i:e.f(a.historyKey,((t,i,s)=>({a:e.t(t),b:e.o((e=>n.onClickHistory(t)))})))}:{},{j:e.f(a.buildingData,((i,s,o)=>({a:n.getImageUrl(i.pic),b:e.t(i.name),c:e.t(i.price),d:e.t(i.address),e:e.f(i.tags,((i,s,o)=>e.e({a:i&&""!=t.tab},i&&""!=t.tab?{b:e.t(i)}:{}))),f:e.o((e=>n.onItemClick(i)))}))),k:e.sr("paging","752c47ff-0"),l:e.o(n.fetchBuildingList),m:e.o((e=>a.buildingData=e)),n:e.p({"default-page-size":"20",auto:!1,modelValue:a.buildingData})})}],["__scopeId","data-v-752c47ff"]]);wx.createPage(r);
