"use strict";const e=require("../../common/vendor.js"),s=require("../../utils/cache.js"),t={data:()=>({type:1,userCard:null,userInfo:null}),onLoad(s){const{type:t}=s;this.type=t,e.index.setNavigationBarTitle({title:1==t?"我的名片":"编辑名片"})},onShow(){this.fetchUserCard(),this.fetchUserInfo()},methods:{getDisplayInputValue(e){return"name"===e&&this.userCard&&this.userCard.name?this.userCard.name:"phone"===e?this.userInfo&&this.userInfo.phone?this.userInfo.phone:"":"company"===e&&this.userCard&&this.userCard.company?this.userCard.company:"address"===e&&this.userCard&&this.userCard.address?this.userCard.address:""},fetchUserInfo(){let e=s.cache.getToken();e&&""!=e?this.$api.fetchUserInfo().then((e=>{this.userInfo=e})).catch((e=>{})):this.userInfo=null},fetchUserCard(){this.$api.fetchUserCard().then((e=>{this.userCard=e,console.log("fetchUserCard result: "+JSON.stringify(e))})).catch((e=>{console.log("fetchUserCard err: "+JSON.stringify(e))}))},submitUserCard(s){let t=s.detail.value.name,a=s.detail.value.phone,r=s.detail.value.company,n=s.detail.value.address;0!==t.length?this.$api.submitUserCard(t,a,r,n).then((s=>{this.$msg("提交成功"),e.index.navigateBack()})).catch((e=>{})):this.$msg("请输入联系人")}}};const a=e._export_sfc(t,[["render",function(s,t,a,r,n,i){return{a:i.getDisplayInputValue("name"),b:i.getDisplayInputValue("phone"),c:i.getDisplayInputValue("company"),d:i.getDisplayInputValue("address"),e:e.t(1==n.type?"确认":"保存并使用"),f:e.o(((...e)=>i.submitUserCard&&i.submitUserCard(...e)))}}],["__scopeId","data-v-4d1da455"]]);wx.createPage(a);
