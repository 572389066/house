import{C as e,n as s,o as a,c as t,w as l,i,a as o,d as r,j as n,b as d,r as c,F as u,f,I as y,e as h,t as p}from"./index.50f83746.js";import{_ as m}from"./uni-icons.3d233546.js";import{r as g}from"./uni-app.es.c352a98c.js";import{_}from"./z-paging.6450377e.js";import{u as K}from"./urlUtil.7c805a33.js";import{_ as k}from"./search.b6584a89.js";import{_ as w}from"./_plugin-vue_export-helper.cdc0426e.js";const b=w({data:()=>({inputValue:"",buildingData:[],historyKey:[],keywords:null}),onLoad(){this.historyKey=e.getHistoryKeywords()},methods:{getImageUrl:e=>K.getImgUrlNotSize(e),onItemClick(e){s({url:"/pages/pfs/detail?id="+e.id})},cleanHistoryKeywords(){e.cleanHistoryKeywords(),this.historyKey=e.getHistoryKeywords()},onClickSearch(s){e.saveHistoryKeywords(this.keywords),this.historyKey=e.getHistoryKeywords(),this.onSearch(s)},onSearch(e){this.keywords=e.detail.value,this.fetchBuildingList(1,20)},fetchBuildingList(e,s){this.$api.fetchBuildingList(e,s,this.keywords,"",!1).then((e=>{this.$refs.paging.complete(e)})).catch((e=>{this.$refs.paging.complete(!1)}))}}},[["render",function(e,s,K,w,b,C){const I=f,j=y,x=i,D=g(h("uni-icons"),m),H=g(h("z-paging"),_);return a(),t(x,{class:"search"},{default:l((()=>[o(H,{ref:"paging",modelValue:b.buildingData,"onUpdate:modelValue":s[1]||(s[1]=e=>b.buildingData=e),onQuery:C.fetchBuildingList,"default-page-size":"20",auto:!1},{top:l((()=>[o(x,null,{default:l((()=>[o(x,{class:"top"},{default:l((()=>[o(x,{class:"add"},{default:l((()=>[o(I,{src:k,mode:"widthFix"}),o(j,{type:"text",placeholder:"请输入您要搜索的项目",value:b.inputValue,"placeholder-style":"color: #D0D0D0;","confirm-type":"search",onConfirm:C.onClickSearch,onInput:C.onSearch},null,8,["value","onConfirm","onInput"])])),_:1})])),_:1}),o(x,{class:"cont"},{default:l((()=>[o(x,{class:"title"},{default:l((()=>[o(x,null,{default:l((()=>[r("历史搜索")])),_:1}),b.historyKey&&b.historyKey.length>0?(a(),t(D,{key:0,type:"trash-filled",size:"34rpx",color:"#626162",onClick:s[0]||(s[0]=e=>C.cleanHistoryKeywords())})):n("",!0)])),_:1}),o(x,{class:"label"},{default:l((()=>[b.historyKey&&b.historyKey.length>0?(a(!0),d(u,{key:0},c(b.historyKey,((e,s)=>(a(),t(x,null,{default:l((()=>[r(p(e),1)])),_:2},1024)))),256)):n("",!0)])),_:1})])),_:1})])),_:1})])),default:l((()=>[o(x,{class:"list"},{default:l((()=>[o(x,{class:"common-ul"},{default:l((()=>[(a(!0),d(u,null,c(b.buildingData,((s,i)=>(a(),t(x,{class:"li",onClick:e=>C.onItemClick(s)},{default:l((()=>[o(I,{src:C.getImageUrl(s.pic),mode:"aspectFill"},null,8,["src"]),o(x,{class:"font"},{default:l((()=>[o(x,{class:"name"},{default:l((()=>[r(p(s.name),1)])),_:2},1024),o(x,{class:"m"},{default:l((()=>[r("约"+p(s.price)+"起元/㎡",1)])),_:2},1024),o(x,{class:"text"},{default:l((()=>[r(p(s.address),1)])),_:2},1024),o(x,{class:"label"},{default:l((()=>[(a(!0),d(u,null,c(s.tags,((s,i)=>(a(),d(u,null,[s&&""!=e.tab?(a(),t(x,{key:0},{default:l((()=>[r(p(s),1)])),_:2},1024)):n("",!0)],64)))),256))])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})])),_:1})])),_:1},8,["modelValue","onQuery"])])),_:1})}],["__scopeId","data-v-fa9fff4b"]]);export{b as default};
